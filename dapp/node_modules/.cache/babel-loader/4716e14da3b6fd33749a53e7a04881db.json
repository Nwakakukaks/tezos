{"ast":null,"code":"var _jsxFileName = \"/workspace/box-defi/dapp/src/pages/Pool.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\"; // Components\n\nimport Button from \"../components/Button\"; // Data\n\nimport { info } from \"../data\"; // Hooks\n\nimport { useActions, useTypedSelector } from \"../hooks\"; // Utils\n\nimport { divide, multiply } from \"../utils/math\";\nimport { formatTokenBalance } from \"../utils/strings\";\nimport { blockInvalidChars } from \"../utils/input\"; // Operations\n\nimport { lockTokens, unlockTokens } from \"../operations/pool\"; // Assets\n\nimport SEED from \"../assets/icons/seed.png\";\nimport kUSD from \"../assets/icons/kUSD.png\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Pool = () => {\n  _s();\n\n  const [selected, setSelected] = useState(0);\n  const [kUSDValue, setkUSDValue] = useState(\"\");\n  const [seedValue, setSeedValue] = useState(\"\");\n  const [error, setError] = useState(\"\");\n  const {\n    setLoading,\n    setSuccess,\n    setFailure\n  } = useActions();\n  const {\n    tokenBalances,\n    isConnected\n  } = useTypedSelector(state => state.wallet);\n  const {\n    seedSupply,\n    kUSDLocked\n  } = useTypedSelector(state => state.stats); // Recalibrates output value of one tokens w.r.t to the other and operation type\n\n  useEffect(() => {\n    // If locking tokens\n    if (selected === 0) {\n      setSeedValue(divide(divide(multiply(multiply(kUSDValue, 10 ** 18), seedSupply), kUSDLocked), 10 ** 18));\n    } else if (selected === 1) {\n      setkUSDValue(divide(divide(multiply(multiply(seedValue, 10 ** 18), kUSDLocked), seedSupply), 10 ** 18));\n    }\n  }, [kUSDValue, seedValue, kUSDLocked, seedSupply, selected]);\n\n  const submit = async () => {\n    // Input validation\n    setError(\"\");\n\n    if (selected === 0) {\n      if (parseFloat(kUSDValue) > parseFloat(divide(tokenBalances.kUSD, 10 ** 18)) || kUSDValue === \"0\") {\n        setError(\"Invalid kUSD amount!\");\n        return;\n      }\n    } else {\n      if (parseFloat(seedValue) > parseFloat(divide(tokenBalances.SEED, 10 ** 18)) || seedValue === \"0\") {\n        setError(\"Invalid SEED amount!\");\n        return;\n      }\n    }\n\n    if (selected === 0) {\n      try {\n        const op = await lockTokens(kUSDValue);\n\n        if (op) {\n          setLoading(\"Locking kUSD\");\n          await (await op.send()).confirmation(1);\n          setSuccess(\"Lockup of kUSD successful!\");\n        }\n      } catch (err) {\n        setFailure(`Locking Failed: ${err.message}`);\n      }\n    } else {\n      try {\n        const op = await unlockTokens(seedValue);\n\n        if (op) {\n          setLoading(\"Unlocking kUSD\");\n          await (await op.send()).confirmation(1);\n          setSuccess(\"Unlock of kUSD successful!\");\n        }\n      } catch (err) {\n        setFailure(`Unlocking Failed: ${err.message}`);\n      }\n    }\n  };\n\n  const kUSDInput = /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex items-center rounded-lg bg-fadedWhite md:w-3/4 m-auto\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center p-2 rounded-tl-lg rounded-bl-lg bg-bgGreen2\",\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        className: \"w-7\",\n        alt: \"kUSD\",\n        src: kUSD\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"text-lg font-semibold ml-2\",\n        children: \"kUSD\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"number\",\n      value: kUSDValue,\n      onKeyDown: blockInvalidChars([\"-\", \"+\", \"e\", \"E\"]),\n      onChange: e => setkUSDValue(e.target.value),\n      className: \"min-w-0 w-2/4 flex-grow rounded-tr-lg rounded-br-lg bg-fadedWhite focus:outline-none text-xl px-2\",\n      placeholder: selected === 0 ? \"0.00\" : \"kUSD received (Approx)\",\n      disabled: selected === 1\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }, this), selected === 0 && /*#__PURE__*/_jsxDEV(\"span\", {\n      onClick: () => setkUSDValue(divide(tokenBalances.kUSD, 10 ** 18)),\n      className: \"text-base font-semibold text-fadedBlack opacity-70 hover:opacity-100 mr-2 cursor-pointer\",\n      children: \"MAX\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 86,\n    columnNumber: 5\n  }, this);\n\n  const SEEDInput = /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex items-center rounded-lg bg-fadedWhite md:w-3/4 m-auto\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center p-2 rounded-tl-lg rounded-bl-lg bg-bgBrown\",\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        className: \"w-7\",\n        alt: \"kUSD\",\n        src: SEED\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"text-lg font-semibold ml-2\",\n        children: \"SEED\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"number\",\n      value: seedValue,\n      onKeyDown: blockInvalidChars([\"-\", \"+\", \"e\", \"E\"]),\n      onChange: e => setSeedValue(e.target.value),\n      className: \"min-w-0 w-2/4 flex-grow rounded-tr-lg rounded-br-lg bg-fadedWhite focus:outline-none text-xl px-2\",\n      placeholder: selected === 1 ? \"0.00\" : \"SEED received (Approx)\",\n      disabled: selected === 0\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 7\n    }, this), selected === 1 && /*#__PURE__*/_jsxDEV(\"span\", {\n      onClick: () => setSeedValue(divide(tokenBalances.SEED, 10 ** 18)),\n      className: \"text-base font-semibold text-fadedBlack opacity-70 hover:opacity-100 mr-2 cursor-pointer\",\n      children: \"MAX\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 112,\n    columnNumber: 5\n  }, this);\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"font-secondary rounded-lg bg-white p-6 md:w-3/4 mx-auto\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid grid-cols-1 md:grid-cols-3 gap-y-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-col items-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"font-medium text-fadedBlack text-base md:text-xl mb-1\",\n          children: \"\\uD83D\\uDD12 Locked kUSD\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"font-semibold text-2xl\",\n          children: formatTokenBalance(kUSDLocked, 18)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-col items-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"font-medium text-fadedBlack text-base md:text-xl mb-1\",\n          children: \"\\uD83C\\uDF30 Seed Supply\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"font-semibold text-2xl\",\n          children: formatTokenBalance(seedSupply, 18)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-col items-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"font-medium text-fadedBlack text-base md:text-xl mb-1\",\n          children: \"\\uD83D\\uDE80 Flash Loan Fee\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"font-semibold text-2xl\",\n          children: \"1.00 %\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-12\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-center gap-x-6 items-center text-2xl transition-all duration-300\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          onClick: () => setSelected(0),\n          className: `cursor-pointer flex flex-col gap-y-1 items-center ${selected === 0 ? \"text-black\" : \"text-fadedBlack\"}`,\n          children: [\"Lock\", /*#__PURE__*/_jsxDEV(\"span\", {\n            className: `h-0.5 w-full m-auto ${selected === 0 && \"bg-black\"}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 162,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          onClick: () => setSelected(1),\n          className: `cursor-pointer flex flex-col gap-y-1 ${selected === 1 ? \"text-black\" : \"text-fadedBlack\"}`,\n          children: [\"Unlock\", /*#__PURE__*/_jsxDEV(\"span\", {\n            className: `h-0.5 w-full m-auto ${selected === 1 && \"bg-black\"}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-8 flex flex-col items-center gap-y-4\",\n        children: [error && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"md:w-3/4 m-auto text-left text-base text-red-500 -mb-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"bi bi-exclamation-circle mr-2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 175,\n            columnNumber: 15\n          }, this), error]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(React.Fragment, {\n          children: [selected === 0 ? kUSDInput : SEEDInput, /*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"bi bi-arrow-down-circle-fill text-blue-500 text-xl\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 13\n          }, this), selected === 1 ? kUSDInput : SEEDInput, /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-4\",\n            children: selected === 0 ? /*#__PURE__*/_jsxDEV(Button, {\n              disabled: !isConnected,\n              text: \"Lock Tokens\",\n              icon: \"lock-fill\",\n              background: \"bg-bgGreen2\",\n              onClick: submit\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 185,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(Button, {\n              disabled: !isConnected,\n              text: \"Unlock Tokens\",\n              icon: \"unlock-fill\",\n              background: \"bg-bgBrown\",\n              onClick: submit\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 193,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 183,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-8 rounded-lg bg-gray-200 p-3 md:w-10/12 m-auto\",\n        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"bi bi-info-circle mr-1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 11\n        }, this), info.pool]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 138,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Pool, \"q7Y1REZ45T+0dTY6cwbVHGL5wjs=\", false, function () {\n  return [useActions, useTypedSelector, useTypedSelector];\n});\n\n_c = Pool;\nexport default Pool;\n\nvar _c;\n\n$RefreshReg$(_c, \"Pool\");","map":{"version":3,"sources":["/workspace/box-defi/dapp/src/pages/Pool.tsx"],"names":["React","useState","useEffect","Button","info","useActions","useTypedSelector","divide","multiply","formatTokenBalance","blockInvalidChars","lockTokens","unlockTokens","SEED","kUSD","Pool","selected","setSelected","kUSDValue","setkUSDValue","seedValue","setSeedValue","error","setError","setLoading","setSuccess","setFailure","tokenBalances","isConnected","state","wallet","seedSupply","kUSDLocked","stats","submit","parseFloat","op","send","confirmation","err","message","kUSDInput","e","target","value","SEEDInput","pool"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\n\n// Components\nimport Button from \"../components/Button\";\n\n// Data\nimport { info } from \"../data\";\n\n// Hooks\nimport { useActions, useTypedSelector } from \"../hooks\";\n\n// Utils\nimport { divide, multiply } from \"../utils/math\";\nimport { formatTokenBalance } from \"../utils/strings\";\nimport { blockInvalidChars } from \"../utils/input\";\n\n// Operations\nimport { lockTokens, unlockTokens } from \"../operations/pool\";\n\n// Assets\nimport SEED from \"../assets/icons/seed.png\";\nimport kUSD from \"../assets/icons/kUSD.png\";\n\nconst Pool = () => {\n  const [selected, setSelected] = useState<number>(0);\n  const [kUSDValue, setkUSDValue] = useState<string>(\"\");\n  const [seedValue, setSeedValue] = useState<string>(\"\");\n  const [error, setError] = useState<string>(\"\");\n\n  const { setLoading, setSuccess, setFailure } = useActions();\n\n  const { tokenBalances, isConnected } = useTypedSelector((state) => state.wallet);\n  const { seedSupply, kUSDLocked } = useTypedSelector((state) => state.stats);\n\n  // Recalibrates output value of one tokens w.r.t to the other and operation type\n  useEffect(() => {\n    // If locking tokens\n    if (selected === 0) {\n      setSeedValue(divide(divide(multiply(multiply(kUSDValue, 10 ** 18), seedSupply), kUSDLocked), 10 ** 18));\n    } else if (selected === 1) {\n      setkUSDValue(divide(divide(multiply(multiply(seedValue, 10 ** 18), kUSDLocked), seedSupply), 10 ** 18));\n    }\n  }, [kUSDValue, seedValue, kUSDLocked, seedSupply, selected]);\n\n  const submit = async () => {\n    // Input validation\n    setError(\"\");\n    if (selected === 0) {\n      if (parseFloat(kUSDValue) > parseFloat(divide(tokenBalances.kUSD, 10 ** 18)) || kUSDValue === \"0\") {\n        setError(\"Invalid kUSD amount!\");\n        return;\n      }\n    } else {\n      if (parseFloat(seedValue) > parseFloat(divide(tokenBalances.SEED, 10 ** 18)) || seedValue === \"0\") {\n        setError(\"Invalid SEED amount!\");\n        return;\n      }\n    }\n\n    if (selected === 0) {\n      try {\n        const op = await lockTokens(kUSDValue);\n        if (op) {\n          setLoading(\"Locking kUSD\");\n          await (await op.send()).confirmation(1);\n          setSuccess(\"Lockup of kUSD successful!\");\n        }\n      } catch (err: any) {\n        setFailure(`Locking Failed: ${err.message}`);\n      }\n    } else {\n      try {\n        const op = await unlockTokens(seedValue);\n        if (op) {\n          setLoading(\"Unlocking kUSD\");\n          await (await op.send()).confirmation(1);\n          setSuccess(\"Unlock of kUSD successful!\");\n        }\n      } catch (err: any) {\n        setFailure(`Unlocking Failed: ${err.message}`);\n      }\n    }\n  };\n\n  const kUSDInput = (\n    <div className=\"flex items-center rounded-lg bg-fadedWhite md:w-3/4 m-auto\">\n      <div className=\"flex items-center p-2 rounded-tl-lg rounded-bl-lg bg-bgGreen2\">\n        <img className=\"w-7\" alt=\"kUSD\" src={kUSD} />\n        <span className=\"text-lg font-semibold ml-2\">kUSD</span>\n      </div>\n      <input\n        type=\"number\"\n        value={kUSDValue}\n        onKeyDown={blockInvalidChars([\"-\", \"+\", \"e\", \"E\"])}\n        onChange={(e) => setkUSDValue(e.target.value)}\n        className=\"min-w-0 w-2/4 flex-grow rounded-tr-lg rounded-br-lg bg-fadedWhite focus:outline-none text-xl px-2\"\n        placeholder={selected === 0 ? \"0.00\" : \"kUSD received (Approx)\"}\n        disabled={selected === 1}\n      />\n      {selected === 0 && (\n        <span\n          onClick={() => setkUSDValue(divide(tokenBalances.kUSD, 10 ** 18))}\n          className=\"text-base font-semibold text-fadedBlack opacity-70 hover:opacity-100 mr-2 cursor-pointer\"\n        >\n          MAX\n        </span>\n      )}\n    </div>\n  );\n\n  const SEEDInput = (\n    <div className=\"flex items-center rounded-lg bg-fadedWhite md:w-3/4 m-auto\">\n      <div className=\"flex items-center p-2 rounded-tl-lg rounded-bl-lg bg-bgBrown\">\n        <img className=\"w-7\" alt=\"kUSD\" src={SEED} />\n        <span className=\"text-lg font-semibold ml-2\">SEED</span>\n      </div>\n      <input\n        type=\"number\"\n        value={seedValue}\n        onKeyDown={blockInvalidChars([\"-\", \"+\", \"e\", \"E\"])}\n        onChange={(e) => setSeedValue(e.target.value)}\n        className=\"min-w-0 w-2/4 flex-grow rounded-tr-lg rounded-br-lg bg-fadedWhite focus:outline-none text-xl px-2\"\n        placeholder={selected === 1 ? \"0.00\" : \"SEED received (Approx)\"}\n        disabled={selected === 0}\n      />\n      {selected === 1 && (\n        <span\n          onClick={() => setSeedValue(divide(tokenBalances.SEED, 10 ** 18))}\n          className=\"text-base font-semibold text-fadedBlack opacity-70 hover:opacity-100 mr-2 cursor-pointer\"\n        >\n          MAX\n        </span>\n      )}\n    </div>\n  );\n\n  return (\n    <div className=\"font-secondary rounded-lg bg-white p-6 md:w-3/4 mx-auto\">\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-y-6\">\n        <div className=\"flex flex-col items-center\">\n          <div className=\"font-medium text-fadedBlack text-base md:text-xl mb-1\">🔒 Locked kUSD</div>\n          <div className=\"font-semibold text-2xl\">{formatTokenBalance(kUSDLocked, 18)}</div>\n        </div>\n        <div className=\"flex flex-col items-center\">\n          <div className=\"font-medium text-fadedBlack text-base md:text-xl mb-1\">🌰 Seed Supply</div>\n          <div className=\"font-semibold text-2xl\">{formatTokenBalance(seedSupply, 18)}</div>\n        </div>\n        <div className=\"flex flex-col items-center\">\n          <div className=\"font-medium text-fadedBlack text-base md:text-xl mb-1\">🚀 Flash Loan Fee</div>\n          <div className=\"font-semibold text-2xl\">1.00 %</div>\n        </div>\n      </div>\n      <div className=\"mt-12\">\n        <div className=\"flex justify-center gap-x-6 items-center text-2xl transition-all duration-300\">\n          <div\n            onClick={() => setSelected(0)}\n            className={`cursor-pointer flex flex-col gap-y-1 items-center ${\n              selected === 0 ? \"text-black\" : \"text-fadedBlack\"\n            }`}\n          >\n            Lock\n            <span className={`h-0.5 w-full m-auto ${selected === 0 && \"bg-black\"}`}></span>\n          </div>\n          <div\n            onClick={() => setSelected(1)}\n            className={`cursor-pointer flex flex-col gap-y-1 ${selected === 1 ? \"text-black\" : \"text-fadedBlack\"}`}\n          >\n            Unlock\n            <span className={`h-0.5 w-full m-auto ${selected === 1 && \"bg-black\"}`}></span>\n          </div>\n        </div>\n        <div className=\"mt-8 flex flex-col items-center gap-y-4\">\n          {error && (\n            <div className=\"md:w-3/4 m-auto text-left text-base text-red-500 -mb-3\">\n              <i className=\"bi bi-exclamation-circle mr-2\" />\n              {error}\n            </div>\n          )}\n          <React.Fragment>\n            {selected === 0 ? kUSDInput : SEEDInput}\n            <i className=\"bi bi-arrow-down-circle-fill text-blue-500 text-xl\" />\n            {selected === 1 ? kUSDInput : SEEDInput}\n            <div className=\"mt-4\">\n              {selected === 0 ? (\n                <Button\n                  disabled={!isConnected}\n                  text=\"Lock Tokens\"\n                  icon=\"lock-fill\"\n                  background=\"bg-bgGreen2\"\n                  onClick={submit}\n                />\n              ) : (\n                <Button\n                  disabled={!isConnected}\n                  text=\"Unlock Tokens\"\n                  icon=\"unlock-fill\"\n                  background=\"bg-bgBrown\"\n                  onClick={submit}\n                />\n              )}\n            </div>\n          </React.Fragment>\n        </div>\n        <div className=\"mt-8 rounded-lg bg-gray-200 p-3 md:w-10/12 m-auto\">\n          <i className=\"bi bi-info-circle mr-1\" />\n          {info.pool}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Pool;\n"]},"metadata":{},"sourceType":"module"}