{"ast":null,"code":"import _regeneratorRuntime from\"/workspace/box-defi/dapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/workspace/box-defi/dapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/workspace/box-defi/dapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState}from\"react\";// Data\nimport{fruits,info}from\"../data\";// Types\nimport{Fruits}from\"../utils/global\";// Operations\nimport{merge}from\"../operations/farm\";// Hooks\nimport{useTypedSelector,useActions}from\"../hooks\";// Components\nimport Button from\"../components/Button\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ID_TO_FRUIT={0:Fruits.MANGROT,1:Fruits.SPOT_BERRY,2:Fruits.BLUE_STRIPE,3:Fruits.CROWN_APPLE};var Wziard=function Wziard(){var _useState=useState(0),_useState2=_slicedToArray(_useState,2),selectedFruit=_useState2[0],setSelectedFruit=_useState2[1];var _useActions=useActions(),setLoading=_useActions.setLoading,setSuccess=_useActions.setSuccess,setFailure=_useActions.setFailure;var _useTypedSelector=useTypedSelector(function(state){return state.wallet;}),fruitBalances=_useTypedSelector.fruitBalances;var handleFruitChange=function handleFruitChange(type){if(type===\"Next\"){setSelectedFruit((selectedFruit+1)%4);}else{setSelectedFruit(selectedFruit===0?3:selectedFruit-1);}};var handleForge=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var op;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return merge(selectedFruit+2);case 3:op=_context.sent;if(!op){_context.next=11;break;}setLoading(\"Forging \".concat(fruits[ID_TO_FRUIT[selectedFruit]].name));_context.next=8;return op.send();case 8:_context.next=10;return _context.sent.confirmation(1);case 10:setSuccess(\"Forging successful!\");case 11:_context.next=16;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](0);setFailure(\"Forging Failed: \".concat(_context.t0.message));case 16:case\"end\":return _context.stop();}}},_callee,null,[[0,13]]);}));return function handleForge(){return _ref.apply(this,arguments);};}();var isPossibleToMake=function isPossibleToMake(){for(var _i=0,_Object$keys=Object.keys(fruits[ID_TO_FRUIT[selectedFruit]].wizardRequirements);_i<_Object$keys.length;_i++){var fruit=_Object$keys[_i];if(parseInt(fruitBalances[fruit])<fruits[ID_TO_FRUIT[selectedFruit]].wizardRequirements[fruit]){return\"NO\";}}return\"YES\";};return/*#__PURE__*/_jsxs(\"div\",{className:\"font-secondary rounded-lg bg-white p-6 2xl:w-3/4 mx-auto\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-primary font-semibold text-fadedBlack text-xl\",children:\"Fruit Wizard\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 gap-4 md:grid-cols-2 mt-5\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-row justify-center items-center\",children:[/*#__PURE__*/_jsx(\"i\",{onClick:function onClick(){return handleFruitChange(\"Previous\");},className:\"bi bi-caret-left-fill cursor-pointer text-3xl\"}),/*#__PURE__*/_jsx(\"img\",{className:\"w-1/2 lg:w-2/3 mx-6\",alt:\"fruit\",src:require(\"../assets/images/fruits/\".concat(ID_TO_FRUIT[selectedFruit].toLowerCase(),\".png\")).default}),/*#__PURE__*/_jsx(\"i\",{onClick:function onClick(){return handleFruitChange(\"Next\");},className:\"bi bi-caret-right-fill cursor-pointer text-3xl\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col gap-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-fadedBlack text-xl mb-2\",children:\"Fruit\"}),/*#__PURE__*/_jsx(\"div\",{className:\"font-medium text-2xl\",children:fruits[ID_TO_FRUIT[selectedFruit]].name})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-fadedBlack text-xl mb-2\",children:\"Requirements\"}),/*#__PURE__*/_jsx(\"div\",{className:\"font-medium text-xl\",children:Object.keys(fruits[ID_TO_FRUIT[selectedFruit]].wizardRequirements).map(function(req){return\"\".concat(fruits[ID_TO_FRUIT[selectedFruit]].wizardRequirements[req],\" \").concat(fruits[req].name);}).join(\", \")})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-fadedBlack text-xl mb-2\",children:\"Rarirty Score\"}),/*#__PURE__*/_jsx(\"div\",{className:\"font-medium text-2xl\",children:fruits[ID_TO_FRUIT[selectedFruit]].rarityScore})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-fadedBlack text-xl mb-2\",children:\"Possible to Make\"}),/*#__PURE__*/_jsx(\"div\",{className:\"font-medium text-2xl\",children:isPossibleToMake()})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-12 rounded-lg bg-gray-200 p-3 md:w-10/12 m-auto\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-info-circle mr-1\"}),info.wizard]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center mt-8\",children:/*#__PURE__*/_jsx(Button,{text:\"Forge\",icon:\"magic\",disabled:isPossibleToMake()===\"NO\",background:\"bg-bg\".concat(fruits[ID_TO_FRUIT[selectedFruit]].name.split(\" \").join(\"\")),onClick:handleForge})})]});};export default Wziard;","map":{"version":3,"sources":["/workspace/box-defi/dapp/src/pages/Wizard.tsx"],"names":["useState","fruits","info","Fruits","merge","useTypedSelector","useActions","Button","ID_TO_FRUIT","MANGROT","SPOT_BERRY","BLUE_STRIPE","CROWN_APPLE","Wziard","selectedFruit","setSelectedFruit","setLoading","setSuccess","setFailure","state","wallet","fruitBalances","handleFruitChange","type","handleForge","op","name","send","confirmation","message","isPossibleToMake","Object","keys","wizardRequirements","fruit","parseInt","require","toLowerCase","default","map","req","join","rarityScore","wizard","split"],"mappings":"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","sourcesContent":["import { useState } from \"react\";\n\n// Data\nimport { fruits, info } from \"../data\";\n\n// Types\nimport { Fruits } from \"../utils/global\";\n\n// Operations\nimport { merge } from \"../operations/farm\";\n\n// Hooks\nimport { useTypedSelector, useActions } from \"../hooks\";\n\n// Components\nimport Button from \"../components/Button\";\n\nconst ID_TO_FRUIT: { [key: number]: Fruits } = {\n  0: Fruits.MANGROT,\n  1: Fruits.SPOT_BERRY,\n  2: Fruits.BLUE_STRIPE,\n  3: Fruits.CROWN_APPLE,\n};\n\nconst Wziard = () => {\n  const [selectedFruit, setSelectedFruit] = useState<number>(0);\n\n  const { setLoading, setSuccess, setFailure } = useActions();\n\n  const { fruitBalances } = useTypedSelector((state) => state.wallet);\n\n  const handleFruitChange = (type: \"Previous\" | \"Next\") => {\n    if (type === \"Next\") {\n      setSelectedFruit((selectedFruit + 1) % 4);\n    } else {\n      setSelectedFruit(selectedFruit === 0 ? 3 : selectedFruit - 1);\n    }\n  };\n\n  const handleForge = async () => {\n    try {\n      const op = await merge(selectedFruit + 2);\n      if (op) {\n        setLoading(`Forging ${fruits[ID_TO_FRUIT[selectedFruit]].name}`);\n        await (await op.send()).confirmation(1);\n        setSuccess(\"Forging successful!\");\n      }\n    } catch (err: any) {\n      setFailure(`Forging Failed: ${err.message}`);\n    }\n  };\n\n  const isPossibleToMake = () => {\n    for (const fruit of Object.keys(fruits[ID_TO_FRUIT[selectedFruit]].wizardRequirements)) {\n      if (\n        parseInt(fruitBalances[fruit as Fruits]) <\n        (fruits[ID_TO_FRUIT[selectedFruit]].wizardRequirements[fruit as Fruits] as number)\n      ) {\n        return \"NO\";\n      }\n    }\n    return \"YES\";\n  };\n\n  return (\n    <div className=\"font-secondary rounded-lg bg-white p-6 2xl:w-3/4 mx-auto\">\n      <div className=\"font-primary font-semibold text-fadedBlack text-xl\">Fruit Wizard</div>\n      <div className=\"grid grid-cols-1 gap-4 md:grid-cols-2 mt-5\">\n        <div className=\"flex flex-row justify-center items-center\">\n          <i onClick={() => handleFruitChange(\"Previous\")} className=\"bi bi-caret-left-fill cursor-pointer text-3xl\" />\n          <img\n            className=\"w-1/2 lg:w-2/3 mx-6\"\n            alt=\"fruit\"\n            src={require(`../assets/images/fruits/${ID_TO_FRUIT[selectedFruit].toLowerCase()}.png`).default}\n          />\n          <i onClick={() => handleFruitChange(\"Next\")} className=\"bi bi-caret-right-fill cursor-pointer text-3xl\" />\n        </div>\n        <div className=\"flex flex-col gap-y-6\">\n          <div>\n            <div className=\"text-fadedBlack text-xl mb-2\">Fruit</div>\n            <div className=\"font-medium text-2xl\">{fruits[ID_TO_FRUIT[selectedFruit]].name}</div>\n          </div>\n          <div>\n            <div className=\"text-fadedBlack text-xl mb-2\">Requirements</div>\n            <div className=\"font-medium text-xl\">\n              {Object.keys(fruits[ID_TO_FRUIT[selectedFruit]].wizardRequirements)\n                .map(\n                  (req) =>\n                    `${fruits[ID_TO_FRUIT[selectedFruit]].wizardRequirements[req as Fruits]} ${\n                      fruits[req as Fruits].name\n                    }`\n                )\n                .join(\", \")}\n            </div>\n          </div>\n          <div>\n            <div className=\"text-fadedBlack text-xl mb-2\">Rarirty Score</div>\n            <div className=\"font-medium text-2xl\">{fruits[ID_TO_FRUIT[selectedFruit]].rarityScore}</div>\n          </div>\n          <div>\n            <div className=\"text-fadedBlack text-xl mb-2\">Possible to Make</div>\n            <div className=\"font-medium text-2xl\">{isPossibleToMake()}</div>\n          </div>\n        </div>\n      </div>\n      <div className=\"mt-12 rounded-lg bg-gray-200 p-3 md:w-10/12 m-auto\">\n        <i className=\"bi bi-info-circle mr-1\" />\n        {info.wizard}\n      </div>\n      <div className=\"flex justify-center mt-8\">\n        <Button\n          text=\"Forge\"\n          icon=\"magic\"\n          disabled={isPossibleToMake() === \"NO\"}\n          background={`bg-bg${fruits[ID_TO_FRUIT[selectedFruit]].name.split(\" \").join(\"\")}`}\n          onClick={handleForge}\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default Wziard;\n"]},"metadata":{},"sourceType":"module"}