{"ast":null,"code":"import _slicedToArray from\"/workspace/box-defi/dapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState,useRef,useEffect}from\"react\";import{BrowserRouter as Router,Routes,Route}from\"react-router-dom\";// Hooks\nimport{useActions,useTypedSelector}from\"./hooks\";// Components\nimport SideBar from\"./components/SideBar\";import Header from\"./components/Header\";import Loader from\"./components/Loader\";// Pages\nimport Dashboard from\"./pages/Dashboard\";import Pool from\"./pages/Pool\";import Wizard from\"./pages/Wizard\";import Farm from\"./pages/Farm\";import Basket from\"./pages/Basket\";import Home from\"./pages/Home\";import Faucet from\"./pages/Faucet\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=function App(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),sidebarOpen=_useState2[0],setSidebarOpen=_useState2[1];var ref=useRef();var _useActions=useActions(),connectWallet=_useActions.connectWallet,loadContracts=_useActions.loadContracts,getBalances=_useActions.getBalances,loadStats=_useActions.loadStats,loadBoxes=_useActions.loadBoxes;var _useTypedSelector=useTypedSelector(function(state){return state.wallet;}),isConnected=_useTypedSelector.isConnected,accountPkh=_useTypedSelector.accountPkh;// Initial checks and load ups\nuseEffect(function(){connectWallet(false);loadStats();},[connectWallet,loadStats]);// Load token and fruit balance\nuseEffect(function(){if(accountPkh){getBalances();loadBoxes();}},[accountPkh,getBalances,loadBoxes]);// Load the wallet contract instances once the wallet is loaded\nuseEffect(function(){if(isConnected){loadContracts();}},[isConnected,loadContracts]);var checkAndCloseSidebar=function checkAndCloseSidebar(e){if(!sidebarOpen)return;if(ref.current===e.target){setSidebarOpen(false);}};return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen h-full w-full bg-gradient-to-b flex from-bgGreen to-bgBlue\",children:/*#__PURE__*/_jsxs(Router,{children:[/*#__PURE__*/_jsx(Loader,{}),/*#__PURE__*/_jsx(SideBar,{setSidebarOpen:setSidebarOpen,sidebarOpen:sidebarOpen}),/*#__PURE__*/_jsx(\"div\",{ref:ref,onClick:function onClick(e){return checkAndCloseSidebar(e);},className:\"h-screen w-screen fixed z-10 bg-black bg-opacity-50 \".concat(sidebarOpen?\"block\":\"hidden\")}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 flex flex-col \".concat(window.location.pathname!==\"/\"&&\"p-2 md:py-5 md:px-7\"),children:[/*#__PURE__*/_jsx(Header,{setSidebarOpen:setSidebarOpen}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 no-scrollbar overflow-x-hidden overflow-y-scroll\",children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Home,{})}),/*#__PURE__*/_jsx(Route,{path:\"/dashboard\",element:/*#__PURE__*/_jsx(Dashboard,{})}),/*#__PURE__*/_jsx(Route,{path:\"/pool\",element:/*#__PURE__*/_jsx(Pool,{})}),/*#__PURE__*/_jsx(Route,{path:\"/farm\",element:/*#__PURE__*/_jsx(Farm,{})}),/*#__PURE__*/_jsx(Route,{path:\"/basket\",element:/*#__PURE__*/_jsx(Basket,{})}),/*#__PURE__*/_jsx(Route,{path:\"/wizard\",element:/*#__PURE__*/_jsx(Wizard,{})}),/*#__PURE__*/_jsx(Route,{path:\"/faucet\",element:/*#__PURE__*/_jsx(Faucet,{})})]})})]})]})});};export default App;","map":{"version":3,"sources":["/workspace/box-defi/dapp/src/App.tsx"],"names":["useState","useRef","useEffect","BrowserRouter","Router","Routes","Route","useActions","useTypedSelector","SideBar","Header","Loader","Dashboard","Pool","Wizard","Farm","Basket","Home","Faucet","App","sidebarOpen","setSidebarOpen","ref","connectWallet","loadContracts","getBalances","loadStats","loadBoxes","state","wallet","isConnected","accountPkh","checkAndCloseSidebar","e","current","target","window","location","pathname"],"mappings":"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","sourcesContent":["import { useState, useRef, useEffect } from \"react\";\nimport { BrowserRouter as Router, Routes, Route } from \"react-router-dom\";\n\n// Hooks\nimport { useActions, useTypedSelector } from \"./hooks\";\n\n// Components\nimport SideBar from \"./components/SideBar\";\nimport Header from \"./components/Header\";\nimport Loader from \"./components/Loader\";\n\n// Pages\nimport Dashboard from \"./pages/Dashboard\";\nimport Pool from \"./pages/Pool\";\nimport Wizard from \"./pages/Wizard\";\nimport Farm from \"./pages/Farm\";\nimport Basket from \"./pages/Basket\";\nimport Home from \"./pages/Home\";\nimport Faucet from \"./pages/Faucet\";\n\nconst App = () => {\n  const [sidebarOpen, setSidebarOpen] = useState<boolean>(false);\n\n  const ref = useRef<any>();\n\n  const { connectWallet, loadContracts, getBalances, loadStats, loadBoxes } = useActions();\n\n  const { isConnected, accountPkh } = useTypedSelector((state) => state.wallet);\n\n  // Initial checks and load ups\n  useEffect(() => {\n    connectWallet(false);\n    loadStats();\n  }, [connectWallet, loadStats]);\n\n  // Load token and fruit balance\n  useEffect(() => {\n    if (accountPkh) {\n      getBalances();\n      loadBoxes();\n    }\n  }, [accountPkh, getBalances, loadBoxes]);\n\n  // Load the wallet contract instances once the wallet is loaded\n  useEffect(() => {\n    if (isConnected) {\n      loadContracts();\n    }\n  }, [isConnected, loadContracts]);\n\n  const checkAndCloseSidebar = (e: React.MouseEvent<HTMLDivElement, MouseEvent>) => {\n    if (!sidebarOpen) return;\n\n    if (ref.current === e.target) {\n      setSidebarOpen(false);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen h-full w-full bg-gradient-to-b flex from-bgGreen to-bgBlue\">\n      <Router>\n        <Loader />\n        <SideBar setSidebarOpen={setSidebarOpen} sidebarOpen={sidebarOpen} />\n        {/* Sidebar closing touch detector */}\n        <div\n          ref={ref}\n          onClick={(e) => checkAndCloseSidebar(e)}\n          className={`h-screen w-screen fixed z-10 bg-black bg-opacity-50 ${sidebarOpen ? \"block\" : \"hidden\"}`}\n        />\n        {/* TODO: Separate out home/landing page to new repo */}\n        <div className={`flex-1 flex flex-col ${window.location.pathname !== \"/\" && \"p-2 md:py-5 md:px-7\"}`}>\n          <Header setSidebarOpen={setSidebarOpen} />\n          <div className={`flex-1 no-scrollbar overflow-x-hidden overflow-y-scroll`}>\n            <Routes>\n              <Route path=\"/\" element={<Home />} />\n              <Route path=\"/dashboard\" element={<Dashboard />} />\n              <Route path=\"/pool\" element={<Pool />} />\n              <Route path=\"/farm\" element={<Farm />} />\n              <Route path=\"/basket\" element={<Basket />} />\n              <Route path=\"/wizard\" element={<Wizard />} />\n              <Route path=\"/faucet\" element={<Faucet />} />\n            </Routes>\n          </div>\n        </div>\n      </Router>\n    </div>\n  );\n};\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}