{"ast":null,"code":"var _jsxFileName = \"/workspace/box-defi/dapp/src/pages/Farm.tsx\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState } from \"react\";\nimport Watering from \"../assets/images/watering.gif\";\nimport Growing from \"../assets/images/growing.gif\"; // Types\n\nimport { BoxStage } from \"../redux/actions/farm\"; // Operations\n\nimport { plantSeeds, waterPlants, harvest } from \"../operations/farm\"; // Utils\n\nimport { seedsPerBox, waterPeriod } from \"../utils/global\";\nimport { getHHMMString } from \"../utils/time\"; // Hooks\n\nimport { useTypedSelector, useActions } from \"../hooks\"; // Components\n\nimport Button from \"../components/Button\"; // Local constants\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst PLANTS_PER_PAGE = 10;\n\nconst Farm = () => {\n  _s();\n\n  const [page, setPage] = useState(1);\n  const [start, setStart] = useState(0);\n  const [end, setEnd] = useState(3);\n  const [filterOption, setFilterOption] = useState(1);\n  const [filteredBoxes, setFilteredBoxes] = useState([]);\n  const {\n    setLoading,\n    setSuccess,\n    setFailure\n  } = useActions();\n  const {\n    tokenBalances\n  } = useTypedSelector(state => state.wallet);\n  const {\n    boxes\n  } = useTypedSelector(state => state.farm); // TODO: memoize\n\n  const pageArr = Array.from({\n    length: Math.ceil(filteredBoxes.length / PLANTS_PER_PAGE)\n  }, (_, i) => i + 1);\n  const numNeedsWater = boxes.filter(box => box.needsWater && box.stage !== BoxStage.STAGE_6).length;\n  const maxBoxes = Math.floor(parseInt(tokenBalances.SEED) / seedsPerBox);\n  useEffect(() => {\n    if (page < start + 1) {\n      setStart(start - 1);\n      setEnd(end - 1);\n    } else if (page > end) {\n      setStart(start + 1);\n      setEnd(end + 1);\n    }\n  }, [page, setStart, setEnd, start, end]);\n  useEffect(() => {\n    setPage(1); // Safe-hatch for decrease in items\n\n    switch (filterOption) {\n      case 0:\n        {\n          // All\n          setFilteredBoxes(boxes);\n          break;\n        }\n\n      case 1:\n        {\n          // Alive\n          setFilteredBoxes(boxes.filter(box => box.stage !== BoxStage.DEAD));\n          break;\n        }\n\n      case 2:\n        {\n          // Needs water\n          setFilteredBoxes(boxes.filter(box => box.needsWater && box.stage !== BoxStage.STAGE_6));\n          break;\n        }\n\n      case 3:\n        {\n          // Harvestable\n          setFilteredBoxes(boxes.filter(box => box.stage === BoxStage.STAGE_6));\n          break;\n        }\n    }\n  }, [filterOption, boxes]);\n\n  const handlePlantSeeds = async () => {\n    try {\n      const op = await plantSeeds(maxBoxes);\n\n      if (op) {\n        setLoading(\"Planting seeds\");\n        await (await op.send()).confirmation(1);\n        setSuccess(\"Planting of seeds succesful!\");\n      }\n    } catch (err) {\n      setFailure(`Planting Failed: ${err.message}`);\n    }\n  };\n\n  const handleWaterPlants = async keys => {\n    try {\n      const op = await waterPlants(keys);\n\n      if (op) {\n        setLoading(\"Watering Plants\");\n        await (await op.send()).confirmation(1);\n        setSuccess(\"Watering succesful!\");\n      }\n    } catch (err) {\n      setFailure(`Watering Failed: ${err.message}`);\n    }\n  };\n\n  const handleHarvest = async key => {\n    try {\n      const op = await harvest(key);\n\n      if (op) {\n        setLoading(\"Harvesting Plant\");\n        await (await op.send()).confirmation(1);\n        setSuccess(\"Harvest succesful!\");\n      }\n    } catch (err) {\n      setFailure(`Harvest Failed: ${err.message}`);\n    }\n  }; // Generate an overlay for the boxes\n\n\n  const getOverlay = box => {\n    if (box.stage === BoxStage.DEAD) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"absolute left-0 bottom-0 h-full w-full rounded-xl bg-black bg-opacity-80 font-semibold text-white px-2 py-5 flex flex-col justify-evenly items-center text-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"bi bi-emoji-frown text-6xl\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-3xl\",\n          children: \"Dead\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 9\n      }, this);\n    } else if (box.stage === BoxStage.STAGE_6) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"absolute left-0 bottom-0 h-full w-full rounded-xl bg-black opacity-0 bg-opacity-0 hover:bg-opacity-80 hover:opacity-100 text-2xl font-semibold text-white px-2 py-5 flex flex-col justify-between items-center text-center\",\n        children: [\"Plant Fully grown!\", /*#__PURE__*/_jsxDEV(Button, {\n          text: \"Harvest\",\n          background: \"bg-green-600\",\n          icon: \"flower3\",\n          onClick: () => handleHarvest(box.key)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 9\n      }, this);\n    } else if (box.needsWater) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"absolute left-0 bottom-0 h-full w-full rounded-xl bg-black opacity-0 bg-opacity-0 hover:bg-opacity-80 hover:opacity-100 text-lg font-semibold text-white px-2 py-5 flex flex-col justify-between items-center text-center\",\n        children: [\"Water in \", getHHMMString(box.waterBy), /*#__PURE__*/_jsxDEV(Button, {\n          text: \"Water\",\n          background: \"bg-blue-400\",\n          icon: \"droplet\",\n          onClick: () => handleWaterPlants([box.key])\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 9\n      }, this);\n    } else {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"absolute left-0 bottom-0 h-full w-full rounded-xl bg-black opacity-0 bg-opacity-0 hover:bg-opacity-80 hover:opacity-100 font-semibold text-white px-2 py-5 flex flex-col justify-evenly items-center text-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"bi bi-emoji-smile text-6xl\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-2xl\",\n          children: \"Plant is healthy!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 9\n      }, this);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"font-secondary flex flex-col gap-y-6 2xl:w-10/12 m-auto\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"rounded-lg bg-white p-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-between items-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"font-primary font-semibold text-fadedBlack text-xl\",\n          children: \"Plant Boxes\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          onClick: () => setFilterOption((filterOption + 1) % 4),\n          className: \"py-1 px-6 rounded-full bg-fadedWhite font-medium text-lg cursor-pointer hover:opacity-75 transition-opacity duration-200\",\n          children: [filterOption === 0 ? \"All Boxes\" : filterOption === 1 ? \"Alive Boxes\" : filterOption === 2 ? \"Needs Water\" : \"Harvestable\", /*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"bi bi-arrow-repeat ml-2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 165,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 9\n      }, this), filteredBoxes.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center\",\n        children: \"Nothing to show.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 40\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-6 grid grid-cols-2 md:grid-cols-5 gap-y-2\",\n        children: filteredBoxes.slice((page - 1) * PLANTS_PER_PAGE, page * PLANTS_PER_PAGE).map((box, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"relative m-auto w-5/6 cursor-pointer pb-6\",\n          children: [getOverlay(box), /*#__PURE__*/_jsxDEV(\"img\", {\n            className: \"w-5/6 m-auto\",\n            alt: \"stage\",\n            src: require(`../assets/images/stages/${box.stage.toLowerCase()}.png`).default\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 173,\n            columnNumber: 15\n          }, this)]\n        }, index, true, {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 9\n      }, this), filteredBoxes.length !== 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-center items-center mt-12\",\n        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n          onClick: () => setPage(Math.max(1, page - 1)),\n          className: \"bi bi-caret-left-fill cursor-pointer text-lg\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 13\n        }, this), pageArr.slice(start, end).map((i, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n          onClick: () => setPage(i),\n          className: `rounded-lg cursor-pointer ${page === i ? \"bg-black text-white\" : \"text-fadedBlack\"} text-lg py-1.5 px-2.5 mx-1`,\n          children: i\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 15\n        }, this)), /*#__PURE__*/_jsxDEV(\"i\", {\n          onClick: () => setPage(Math.min(pageArr.length, page + 1)),\n          className: \"bi bi-caret-right-fill cursor-pointer text-lg\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid grid-cols-1 gap-6 lg:grid-cols-3\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-col rounded-lg bg-white p-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"font-primary font-semibold text-fadedBlack text-xl\",\n          children: \"Stats\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex-1 flex flex-col justify-evenly text-base\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-between\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"\\uD83C\\uDF30 Seeds / Box\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 210,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [(seedsPerBox / 10 ** 18).toFixed(), \" SEED\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 211,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 209,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-between\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"\\u23F0 Watering Period\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 214,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [(waterPeriod / 60000).toFixed(), \" Minutes\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 215,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 213,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-between\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"\\uD83D\\uDCE6 Alive Boxes\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 218,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [boxes.filter(box => box.stage !== BoxStage.DEAD).length, \" Boxes\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 219,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 217,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-between\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"\\uD83D\\uDCA7 Needs Water\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 222,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [numNeedsWater, \" Boxes\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 223,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 221,\n            columnNumber: 13\n          }, this), boxes.filter(box => box.waterBy !== 0 && box.stage !== BoxStage.STAGE_6).length !== 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-between\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"\\uD83D\\uDEB0 Next Watering by\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 227,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: getHHMMString(Math.min(...boxes.filter(box => box.waterBy !== 0 && box.stage !== BoxStage.STAGE_6).map(box => box.waterBy)))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 228,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 226,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex justify-between\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"\\uD83E\\uDEB4 Harvestable\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 240,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [boxes.filter(box => box.stage === BoxStage.STAGE_6).length, \" Boxes\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 241,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 239,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-col justify-between rounded-lg bg-white p-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"font-primary font-semibold text-fadedBlack text-xl\",\n          children: \"Water All\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 246,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mx-auto\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            className: \"w-16 m-auto my-5\",\n            alt: \"plant_watering\",\n            src: Watering\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 248,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"m-auto\",\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              text: \"Water All Boxes\",\n              textColor: \"text-white\",\n              background: \"bg-blue-400\",\n              icon: \"droplet\",\n              disabled: numNeedsWater === 0,\n              onClick: () => handleWaterPlants(boxes.filter(box => box.needsWater).map(box => box.key))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 250,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 249,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-col justify-between rounded-lg bg-white p-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"font-primary font-semibold text-fadedBlack text-xl\",\n          children: \"Plant Seeds\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 262,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mx-auto\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            className: \"w-32 mx-auto pb-4\",\n            alt: \"plant_watering\",\n            src: Growing\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 264,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"m-auto\",\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              text: \"Plant Seeds\",\n              textColor: \"text-white\",\n              background: \"bg-green-500\",\n              icon: \"flower3\",\n              disabled: maxBoxes === 0,\n              onClick: handlePlantSeeds\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 266,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 265,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 263,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 150,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Farm, \"QzKy1m7L/t1CpcoegwmT5k5vyic=\", false, function () {\n  return [useActions, useTypedSelector, useTypedSelector];\n});\n\n_c = Farm;\nexport default Farm;\n\nvar _c;\n\n$RefreshReg$(_c, \"Farm\");","map":{"version":3,"sources":["/workspace/box-defi/dapp/src/pages/Farm.tsx"],"names":["useEffect","useState","Watering","Growing","BoxStage","plantSeeds","waterPlants","harvest","seedsPerBox","waterPeriod","getHHMMString","useTypedSelector","useActions","Button","PLANTS_PER_PAGE","Farm","page","setPage","start","setStart","end","setEnd","filterOption","setFilterOption","filteredBoxes","setFilteredBoxes","setLoading","setSuccess","setFailure","tokenBalances","state","wallet","boxes","farm","pageArr","Array","from","length","Math","ceil","_","i","numNeedsWater","filter","box","needsWater","stage","STAGE_6","maxBoxes","floor","parseInt","SEED","DEAD","handlePlantSeeds","op","send","confirmation","err","message","handleWaterPlants","keys","handleHarvest","key","getOverlay","waterBy","slice","map","index","require","toLowerCase","default","max","min","toFixed"],"mappings":"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","sourcesContent":["import { useEffect, useState } from \"react\";\n\nimport Watering from \"../assets/images/watering.gif\";\nimport Growing from \"../assets/images/growing.gif\";\n\n// Types\nimport { BoxStage, Box } from \"../redux/actions/farm\";\n\n// Operations\nimport { plantSeeds, waterPlants, harvest } from \"../operations/farm\";\n\n// Utils\nimport { seedsPerBox, waterPeriod } from \"../utils/global\";\nimport { getHHMMString } from \"../utils/time\";\n\n// Hooks\nimport { useTypedSelector, useActions } from \"../hooks\";\n\n// Components\nimport Button from \"../components/Button\";\n\n// Local constants\nconst PLANTS_PER_PAGE = 10;\n\nconst Farm = () => {\n  const [page, setPage] = useState<number>(1);\n  const [start, setStart] = useState<number>(0);\n  const [end, setEnd] = useState<number>(3);\n  const [filterOption, setFilterOption] = useState<number>(1);\n  const [filteredBoxes, setFilteredBoxes] = useState<Box[]>([]);\n\n  const { setLoading, setSuccess, setFailure } = useActions();\n  const { tokenBalances } = useTypedSelector((state) => state.wallet);\n  const { boxes } = useTypedSelector((state) => state.farm);\n\n  // TODO: memoize\n  const pageArr = Array.from({ length: Math.ceil(filteredBoxes.length / PLANTS_PER_PAGE) }, (_, i) => i + 1);\n  const numNeedsWater = boxes.filter((box) => box.needsWater && box.stage !== BoxStage.STAGE_6).length;\n  const maxBoxes = Math.floor(parseInt(tokenBalances.SEED) / seedsPerBox);\n\n  useEffect(() => {\n    if (page < start + 1) {\n      setStart(start - 1);\n      setEnd(end - 1);\n    } else if (page > end) {\n      setStart(start + 1);\n      setEnd(end + 1);\n    }\n  }, [page, setStart, setEnd, start, end]);\n\n  useEffect(() => {\n    setPage(1); // Safe-hatch for decrease in items\n    switch (filterOption) {\n      case 0: {\n        // All\n        setFilteredBoxes(boxes);\n        break;\n      }\n      case 1: {\n        // Alive\n        setFilteredBoxes(boxes.filter((box) => box.stage !== BoxStage.DEAD));\n        break;\n      }\n      case 2: {\n        // Needs water\n        setFilteredBoxes(boxes.filter((box) => box.needsWater && box.stage !== BoxStage.STAGE_6));\n        break;\n      }\n      case 3: {\n        // Harvestable\n        setFilteredBoxes(boxes.filter((box) => box.stage === BoxStage.STAGE_6));\n        break;\n      }\n    }\n  }, [filterOption, boxes]);\n\n  const handlePlantSeeds = async () => {\n    try {\n      const op = await plantSeeds(maxBoxes);\n      if (op) {\n        setLoading(\"Planting seeds\");\n        await (await op.send()).confirmation(1);\n        setSuccess(\"Planting of seeds succesful!\");\n      }\n    } catch (err: any) {\n      setFailure(`Planting Failed: ${err.message}`);\n    }\n  };\n\n  const handleWaterPlants = async (keys: number[]) => {\n    try {\n      const op = await waterPlants(keys);\n      if (op) {\n        setLoading(\"Watering Plants\");\n        await (await op.send()).confirmation(1);\n        setSuccess(\"Watering succesful!\");\n      }\n    } catch (err: any) {\n      setFailure(`Watering Failed: ${err.message}`);\n    }\n  };\n\n  const handleHarvest = async (key: number) => {\n    try {\n      const op = await harvest(key);\n      if (op) {\n        setLoading(\"Harvesting Plant\");\n        await (await op.send()).confirmation(1);\n        setSuccess(\"Harvest succesful!\");\n      }\n    } catch (err: any) {\n      setFailure(`Harvest Failed: ${err.message}`);\n    }\n  };\n\n  // Generate an overlay for the boxes\n  const getOverlay = (box: Box) => {\n    if (box.stage === BoxStage.DEAD) {\n      return (\n        <div className=\"absolute left-0 bottom-0 h-full w-full rounded-xl bg-black bg-opacity-80 font-semibold text-white px-2 py-5 flex flex-col justify-evenly items-center text-center\">\n          <i className=\"bi bi-emoji-frown text-6xl\" />\n          <div className=\"text-3xl\">Dead</div>\n        </div>\n      );\n    } else if (box.stage === BoxStage.STAGE_6) {\n      return (\n        <div className=\"absolute left-0 bottom-0 h-full w-full rounded-xl bg-black opacity-0 bg-opacity-0 hover:bg-opacity-80 hover:opacity-100 text-2xl font-semibold text-white px-2 py-5 flex flex-col justify-between items-center text-center\">\n          Plant Fully grown!\n          <Button text=\"Harvest\" background=\"bg-green-600\" icon=\"flower3\" onClick={() => handleHarvest(box.key)} />\n        </div>\n      );\n    } else if (box.needsWater) {\n      return (\n        <div className=\"absolute left-0 bottom-0 h-full w-full rounded-xl bg-black opacity-0 bg-opacity-0 hover:bg-opacity-80 hover:opacity-100 text-lg font-semibold text-white px-2 py-5 flex flex-col justify-between items-center text-center\">\n          Water in {getHHMMString(box.waterBy)}\n          <Button text=\"Water\" background=\"bg-blue-400\" icon=\"droplet\" onClick={() => handleWaterPlants([box.key])} />\n        </div>\n      );\n    } else {\n      return (\n        <div className=\"absolute left-0 bottom-0 h-full w-full rounded-xl bg-black opacity-0 bg-opacity-0 hover:bg-opacity-80 hover:opacity-100 font-semibold text-white px-2 py-5 flex flex-col justify-evenly items-center text-center\">\n          <i className=\"bi bi-emoji-smile text-6xl\" />\n          <div className=\"text-2xl\">Plant is healthy!</div>\n        </div>\n      );\n    }\n  };\n\n  return (\n    <div className=\"font-secondary flex flex-col gap-y-6 2xl:w-10/12 m-auto\">\n      <div className=\"rounded-lg bg-white p-6\">\n        <div className=\"flex justify-between items-center\">\n          <div className=\"font-primary font-semibold text-fadedBlack text-xl\">Plant Boxes</div>\n          <div\n            onClick={() => setFilterOption((filterOption + 1) % 4)}\n            className=\"py-1 px-6 rounded-full bg-fadedWhite font-medium text-lg cursor-pointer hover:opacity-75 transition-opacity duration-200\"\n          >\n            {filterOption === 0\n              ? \"All Boxes\"\n              : filterOption === 1\n              ? \"Alive Boxes\"\n              : filterOption === 2\n              ? \"Needs Water\"\n              : \"Harvestable\"}\n            <i className=\"bi bi-arrow-repeat ml-2\" />\n          </div>\n        </div>\n        {filteredBoxes.length === 0 && <div className=\"text-center\">Nothing to show.</div>}\n        <div className=\"mt-6 grid grid-cols-2 md:grid-cols-5 gap-y-2\">\n          {filteredBoxes.slice((page - 1) * PLANTS_PER_PAGE, page * PLANTS_PER_PAGE).map((box, index) => (\n            <div key={index} className=\"relative m-auto w-5/6 cursor-pointer pb-6\">\n              {getOverlay(box)}\n              <img\n                className=\"w-5/6 m-auto\"\n                alt=\"stage\"\n                src={require(`../assets/images/stages/${box.stage.toLowerCase()}.png`).default}\n              />\n            </div>\n          ))}\n        </div>\n        {filteredBoxes.length !== 0 && (\n          <div className=\"flex justify-center items-center mt-12\">\n            <i\n              onClick={() => setPage(Math.max(1, page - 1))}\n              className=\"bi bi-caret-left-fill cursor-pointer text-lg\"\n            />\n            {pageArr.slice(start, end).map((i, index) => (\n              <div\n                key={index}\n                onClick={() => setPage(i)}\n                className={`rounded-lg cursor-pointer ${\n                  page === i ? \"bg-black text-white\" : \"text-fadedBlack\"\n                } text-lg py-1.5 px-2.5 mx-1`}\n              >\n                {i}\n              </div>\n            ))}\n            <i\n              onClick={() => setPage(Math.min(pageArr.length, page + 1))}\n              className=\"bi bi-caret-right-fill cursor-pointer text-lg\"\n            />\n          </div>\n        )}\n      </div>\n      <div className=\"grid grid-cols-1 gap-6 lg:grid-cols-3\">\n        <div className=\"flex flex-col rounded-lg bg-white p-6\">\n          <div className=\"font-primary font-semibold text-fadedBlack text-xl\">Stats</div>\n          <div className=\"flex-1 flex flex-col justify-evenly text-base\">\n            <div className=\"flex justify-between\">\n              <span>🌰 Seeds / Box</span>\n              <span>{(seedsPerBox / 10 ** 18).toFixed()} SEED</span>\n            </div>\n            <div className=\"flex justify-between\">\n              <span>⏰ Watering Period</span>\n              <span>{(waterPeriod / 60000).toFixed()} Minutes</span>\n            </div>\n            <div className=\"flex justify-between\">\n              <span>📦 Alive Boxes</span>\n              <span>{boxes.filter((box) => box.stage !== BoxStage.DEAD).length} Boxes</span>\n            </div>\n            <div className=\"flex justify-between\">\n              <span>💧 Needs Water</span>\n              <span>{numNeedsWater} Boxes</span>\n            </div>\n            {boxes.filter((box) => box.waterBy !== 0 && box.stage !== BoxStage.STAGE_6).length !== 0 && (\n              <div className=\"flex justify-between\">\n                <span>🚰 Next Watering by</span>\n                <span>\n                  {getHHMMString(\n                    Math.min(\n                      ...boxes\n                        .filter((box) => box.waterBy !== 0 && box.stage !== BoxStage.STAGE_6)\n                        .map((box) => box.waterBy)\n                    )\n                  )}\n                </span>\n              </div>\n            )}\n            <div className=\"flex justify-between\">\n              <span>🪴 Harvestable</span>\n              <span>{boxes.filter((box) => box.stage === BoxStage.STAGE_6).length} Boxes</span>\n            </div>\n          </div>\n        </div>\n        <div className=\"flex flex-col justify-between rounded-lg bg-white p-6\">\n          <div className=\"font-primary font-semibold text-fadedBlack text-xl\">Water All</div>\n          <div className=\"mx-auto\">\n            <img className=\"w-16 m-auto my-5\" alt=\"plant_watering\" src={Watering} />\n            <div className=\"m-auto\">\n              <Button\n                text=\"Water All Boxes\"\n                textColor=\"text-white\"\n                background=\"bg-blue-400\"\n                icon=\"droplet\"\n                disabled={numNeedsWater === 0}\n                onClick={() => handleWaterPlants(boxes.filter((box) => box.needsWater).map((box) => box.key))}\n              />\n            </div>\n          </div>\n        </div>\n        <div className=\"flex flex-col justify-between rounded-lg bg-white p-6\">\n          <div className=\"font-primary font-semibold text-fadedBlack text-xl\">Plant Seeds</div>\n          <div className=\"mx-auto\">\n            <img className=\"w-32 mx-auto pb-4\" alt=\"plant_watering\" src={Growing} />\n            <div className=\"m-auto\">\n              <Button\n                text=\"Plant Seeds\"\n                textColor=\"text-white\"\n                background=\"bg-green-500\"\n                icon=\"flower3\"\n                disabled={maxBoxes === 0}\n                onClick={handlePlantSeeds}\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Farm;\n"]},"metadata":{},"sourceType":"module"}